<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0f172a">
    <meta name="description" content="Sync Planner - Integrasi Perencanaan Harian Islami & Manajemen Tugas dengan Kanban Board">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Sync Planner">
    
    <title>Sync Planner + Kanban Board</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¯</text></svg>">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Theme Toggle -->
    <button class="theme-toggle" id="theme-toggle" onclick="toggleTheme()" aria-label="Toggle dark mode">
        <span class="theme-icon">ğŸŒ™</span>
    </button>

    <!-- PWA Install Banner -->
    <div class="pwa-install-banner" id="pwa-install-banner">
        <div class="pwa-install-info">
            <span class="pwa-install-icon">ğŸ“±</span>
            <div class="pwa-install-text">
                <h4>Install Sync Planner</h4>
                <p>Akses offline & pengalaman lebih baik</p>
            </div>
        </div>
        <div class="pwa-install-actions">
            <button class="pwa-btn pwa-btn-dismiss" onclick="dismissPWABanner()">Nanti</button>
            <button class="pwa-btn pwa-btn-install" onclick="installPWA()">Install</button>
        </div>
    </div>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-brand">
                    <span class="header-icon">ğŸ¯</span>
                    <div>
                        <h1>Sync Planner</h1>
                        <p class="header-tagline">Produktivitas Berbasis Ibadah</p>
                    </div>
                </div>
                <div class="header-date" id="current-date"></div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="nav-tabs">
            <button class="nav-tab active" data-tab="planner" onclick="switchTab('planner')">
                <span class="nav-icon">ğŸ“…</span>
                <span class="nav-text">Planner</span>
            </button>
            <button class="nav-tab" data-tab="pomodoro" onclick="switchTab('pomodoro')">
                <span class="nav-icon">ğŸ…</span>
                <span class="nav-text">Pomodoro</span>
            </button>
            <button class="nav-tab" data-tab="pairwise" onclick="switchTab('pairwise')">
                <span class="nav-icon">âš–ï¸</span>
                <span class="nav-text">Prioritas</span>
            </button>
            <button class="nav-tab" data-tab="kanban" onclick="switchTab('kanban')">
                <span class="nav-icon">ğŸ“‹</span>
                <span class="nav-text">Kanban</span>
            </button>
            <button class="nav-tab" data-tab="settings" onclick="switchTab('settings')">
                <span class="nav-icon">âš™ï¸</span>
                <span class="nav-text">Settings</span>
            </button>
        </nav>

        <!-- ==================== SYNC PLANNER TAB ==================== -->
        <div id="planner-tab" class="tab-content active">
            <div class="planner-grid">
                <!-- Morning Routine -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon icon-tahajud">ğŸŒ™</div>
                        <h2 class="card-title">Rutinitas Tahajud & Subuh</h2>
                    </div>
                    
                    <div class="time-block">
                        <span class="time-label">03:30</span>
                        <div class="time-content">
                            <div class="time-title">Bangun Tahajud</div>
                            <div class="time-desc">Wudhu, sholat tahajud 2-8 rakaat</div>
                        </div>
                    </div>
                    
                    <div class="time-block">
                        <span class="time-label">04:00</span>
                        <div class="time-content">
                            <div class="time-title">Dzikir & Doa</div>
                            <div class="time-desc">Istighfar, tasbih, tawakkal</div>
                        </div>
                    </div>
                    
                    <div class="time-block">
                        <span class="time-label">04:30</span>
                        <div class="time-content">
                            <div class="time-title">Sholat Subuh</div>
                            <div class="time-desc">Berjamaah + dzikir pagi</div>
                        </div>
                    </div>
                    
                    <div class="time-block">
                        <span class="time-label">05:00</span>
                        <div class="time-content">
                            <div class="time-title">Refleksi Stoic</div>
                            <div class="time-desc">Premeditatio malorum, journaling</div>
                        </div>
                    </div>
                </div>

                <!-- Daily Checklist -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon icon-morning">â˜€ï¸</div>
                        <h2 class="card-title">Checklist Harian</h2>
                    </div>
                    
                    <div id="checklist-container">
                        <div class="checklist-item" onclick="toggleCheck(this)" data-index="0">
                            <div class="checkbox">âœ“</div>
                            <span class="check-text">Tahajud minimal 2 rakaat</span>
                        </div>
                        <div class="checklist-item" onclick="toggleCheck(this)" data-index="1">
                            <div class="checkbox">âœ“</div>
                            <span class="check-text">Sholat Subuh berjamaah</span>
                        </div>
                        <div class="checklist-item" onclick="toggleCheck(this)" data-index="2">
                            <div class="checkbox">âœ“</div>
                            <span class="check-text">Dzikir pagi</span>
                        </div>
                        <div class="checklist-item" onclick="toggleCheck(this)" data-index="3">
                            <div class="checkbox">âœ“</div>
                            <span class="check-text">Olahraga 15-30 menit</span>
                        </div>
                        <div class="checklist-item" onclick="toggleCheck(this)" data-index="4">
                            <div class="checkbox">âœ“</div>
                            <span class="check-text">3 MIT (Most Important Tasks)</span>
                        </div>
                        <div class="checklist-item" onclick="toggleCheck(this)" data-index="5">
                            <div class="checkbox">âœ“</div>
                            <span class="check-text">Sholat Dzuhur tepat waktu</span>
                        </div>
                        <div class="checklist-item" onclick="toggleCheck(this)" data-index="6">
                            <div class="checkbox">âœ“</div>
                            <span class="check-text">Sholat Ashar tepat waktu</span>
                        </div>
                        <div class="checklist-item" onclick="toggleCheck(this)" data-index="7">
                            <div class="checkbox">âœ“</div>
                            <span class="check-text">Dzikir petang</span>
                        </div>
                        <div class="checklist-item" onclick="toggleCheck(this)" data-index="8">
                            <div class="checkbox">âœ“</div>
                            <span class="check-text">Evaluasi hari (Sedona Method)</span>
                        </div>
                    </div>
                    
                    <div class="progress-container">
                        <div class="progress-header">
                            <span>Progress Hari Ini</span>
                            <span id="progress-text">0%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                        </div>
                    </div>
                </div>

                <!-- Work Block -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon icon-work">ğŸ’¼</div>
                        <h2 class="card-title">Blok Kerja</h2>
                    </div>
                    
                    <div class="time-block">
                        <span class="time-label">07:30</span>
                        <div class="time-content">
                            <div class="time-title">Persiapan Kerja</div>
                            <div class="time-desc">Review agenda, prioritas MIT</div>
                        </div>
                    </div>
                    
                    <div class="time-block highlight">
                        <span class="time-label">08:00</span>
                        <div class="time-content">
                            <div class="time-title">Deep Work Session 1</div>
                            <div class="time-desc">Tugas prioritas tinggi (2 jam)</div>
                        </div>
                    </div>
                    
                    <div class="time-block">
                        <span class="time-label">10:00</span>
                        <div class="time-content">
                            <div class="time-title">Istirahat & Email</div>
                            <div class="time-desc">Check email, komunikasi ringan</div>
                        </div>
                    </div>
                    
                    <div class="time-block highlight">
                        <span class="time-label">10:30</span>
                        <div class="time-content">
                            <div class="time-title">Deep Work Session 2</div>
                            <div class="time-desc">Meeting & kolaborasi</div>
                        </div>
                    </div>
                    
                    <div class="time-block prayer">
                        <span class="time-label">12:00</span>
                        <div class="time-content">
                            <div class="time-title">ğŸ•Œ Sholat Dzuhur</div>
                            <div class="time-desc">Tepat waktu + dzikir</div>
                        </div>
                    </div>
                    
                    <div class="time-block">
                        <span class="time-label">12:30</span>
                        <div class="time-content">
                            <div class="time-title">Istirahat Makan Siang</div>
                            <div class="time-desc">Makan, qailulah (tidur siang)</div>
                        </div>
                    </div>
                    
                    <div class="time-block highlight">
                        <span class="time-label">13:30</span>
                        <div class="time-content">
                            <div class="time-title">Deep Work Session 3</div>
                            <div class="time-desc">Administrative tasks</div>
                        </div>
                    </div>
                    
                    <div class="time-block prayer">
                        <span class="time-label">15:00</span>
                        <div class="time-content">
                            <div class="time-title">ğŸ•Œ Sholat Ashar</div>
                            <div class="time-desc">Tepat waktu + dzikir</div>
                        </div>
                    </div>
                    
                    <div class="time-block highlight">
                        <span class="time-label">15:30</span>
                        <div class="time-content">
                            <div class="time-title">Deep Work Session 4</div>
                            <div class="time-desc">Review & planning besok</div>
                        </div>
                    </div>
                </div>

                <!-- Evening Routine -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon icon-evening">ğŸŒ…</div>
                        <h2 class="card-title">Rutinitas Sore & Malam</h2>
                    </div>
                    
                    <div class="time-block">
                        <span class="time-label">17:00</span>
                        <div class="time-content">
                            <div class="time-title">Selesai Kerja</div>
                            <div class="time-desc">Shutdown ritual, rapikan meja</div>
                        </div>
                    </div>
                    
                    <div class="time-block prayer">
                        <span class="time-label">18:00</span>
                        <div class="time-content">
                            <div class="time-title">ğŸ•Œ Sholat Maghrib</div>
                            <div class="time-desc">Berjamaah + dzikir petang</div>
                        </div>
                    </div>
                    
                    <div class="time-block">
                        <span class="time-label">18:30</span>
                        <div class="time-content">
                            <div class="time-title">Quality Time Keluarga</div>
                            <div class="time-desc">Makan bersama, ngobrol</div>
                        </div>
                    </div>
                    
                    <div class="time-block prayer">
                        <span class="time-label">19:15</span>
                        <div class="time-content">
                            <div class="time-title">ğŸ•Œ Sholat Isya</div>
                            <div class="time-desc">Berjamaah + wirid</div>
                        </div>
                    </div>
                    
                    <div class="time-block">
                        <span class="time-label">20:00</span>
                        <div class="time-content">
                            <div class="time-title">Personal Development</div>
                            <div class="time-desc">Baca buku, online course</div>
                        </div>
                    </div>
                    
                    <div class="time-block">
                        <span class="time-label">21:30</span>
                        <div class="time-content">
                            <div class="time-title">Wind Down</div>
                            <div class="time-desc">Sedona Method, journaling malam</div>
                        </div>
                    </div>
                    
                    <div class="time-block">
                        <span class="time-label">22:00</span>
                        <div class="time-content">
                            <div class="time-title">Tidur</div>
                            <div class="time-desc">Doa tidur, target 5-6 jam</div>
                        </div>
                    </div>
                </div>

                <!-- Reflection Section -->
                <div class="card card-full">
                    <div class="card-header">
                        <div class="card-icon icon-reflection">âœ¨</div>
                        <h2 class="card-title">Refleksi Harian</h2>
                    </div>
                    
                    <div class="reflection-grid">
                        <div class="reflection-group">
                            <label class="reflection-label">ğŸŒŸ 3 Hal Baik Hari Ini</label>
                            <textarea class="reflection-textarea" id="reflection-good" placeholder="Apa saja yang berjalan baik hari ini?" oninput="saveReflections()"></textarea>
                        </div>
                        
                        <div class="reflection-group">
                            <label class="reflection-label">ğŸ”§ Yang Bisa Diperbaiki</label>
                            <textarea class="reflection-textarea" id="reflection-improve" placeholder="Apa yang bisa lebih baik?" oninput="saveReflections()"></textarea>
                        </div>
                        
                        <div class="reflection-group">
                            <label class="reflection-label">ğŸ¤² Syukur Hari Ini</label>
                            <textarea class="reflection-textarea" id="reflection-gratitude" placeholder="Nikmat apa yang disyukuri?" oninput="saveReflections()"></textarea>
                        </div>
                        
                        <div class="reflection-group">
                            <label class="reflection-label">ğŸ§˜ Sedona Method Release</label>
                            <textarea class="reflection-textarea" id="reflection-sedona" placeholder="Emosi apa yang dilepaskan? (Could I let it go? Would I? When?)" oninput="saveReflections()"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== POMODORO TAB ==================== -->
        <div id="pomodoro-tab" class="tab-content">
            <div class="pomodoro-grid">
                <!-- Timer Card -->
                <div class="card pomodoro-main">
                    <div class="card-header">
                        <div class="card-icon icon-pomodoro">ğŸ…</div>
                        <h2 class="card-title">Pomodoro Timer</h2>
                    </div>

                    <!-- Mode Selector -->
                    <div class="mode-selector">
                        <button class="mode-btn active work" data-mode="work" onclick="setTimerMode('work')">
                            ğŸ¯ Deep Work
                        </button>
                        <button class="mode-btn short-break" data-mode="short-break" onclick="setTimerMode('short-break')">
                            â˜• Istirahat
                        </button>
                        <button class="mode-btn long-break" data-mode="long-break" onclick="setTimerMode('long-break')">
                            ğŸŒ´ Istirahat Panjang
                        </button>
                    </div>

                    <!-- Timer Ring Display -->
                    <div class="timer-ring">
                        <svg width="280" height="280" viewBox="0 0 280 280">
                            <circle class="timer-ring-bg" cx="140" cy="140" r="130"></circle>
                            <circle class="timer-ring-progress work" id="timer-progress" cx="140" cy="140" r="130" 
                                stroke-dasharray="816.81" stroke-dashoffset="0"></circle>
                        </svg>
                        <div class="timer-ring-content">
                            <div class="timer-time" id="timer-display">25:00</div>
                            <div class="timer-label" id="timer-mode-label">Deep Work</div>
                        </div>
                    </div>

                    <!-- Timer Controls -->
                    <div class="timer-controls">
                        <button class="timer-btn timer-btn-start" id="btn-timer-start" onclick="startTimer()">
                            <span>â–¶</span> Mulai
                        </button>
                        <button class="timer-btn timer-btn-pause" id="btn-timer-pause" onclick="pauseTimer()" style="display: none;">
                            <span>â¸</span> Pause
                        </button>
                        <button class="timer-btn timer-btn-reset" onclick="resetTimer()">
                            <span>â†º</span> Reset
                        </button>
                        <button class="timer-btn timer-btn-skip" onclick="skipTimer()">
                            <span>â­</span> Skip
                        </button>
                    </div>

                    <!-- Current Task Display -->
                    <div class="current-task-display" id="current-task-display" style="display: none;">
                        <h4>ğŸ“Œ Sedang Dikerjakan:</h4>
                        <p id="current-task-name">-</p>
                    </div>

                    <!-- Session Info -->
                    <div class="timer-session" id="session-info">
                        Sesi 1 dari 4 ğŸ…
                    </div>

                    <!-- Stats -->
                    <div class="pomodoro-stats">
                        <div class="stat-box">
                            <div class="stat-box-value" id="stat-pomodoros">0</div>
                            <div class="stat-box-label">Pomodoro</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-box-value" id="stat-focus-time">0m</div>
                            <div class="stat-box-label">Fokus</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-box-value" id="stat-breaks">0</div>
                            <div class="stat-box-label">Istirahat</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-box-value" id="stat-streak">0</div>
                            <div class="stat-box-label">Streak ğŸ”¥</div>
                        </div>
                    </div>
                </div>

                <!-- Deep Work Sessions Card -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon icon-work">ğŸ’¼</div>
                        <h2 class="card-title">Deep Work Sessions</h2>
                    </div>
                    
                    <div class="deep-work-sessions" id="deep-work-sessions">
                        <div class="session-card" data-session="1">
                            <div class="session-info">
                                <div class="session-number">1</div>
                                <div class="session-details">
                                    <h4>Deep Work Session 1</h4>
                                    <p>08:00 - 10:00 | Prioritas Tinggi</p>
                                </div>
                            </div>
                            <div class="session-action">
                                <span class="session-status status-pending" id="session-status-1">Menunggu</span>
                                <button class="start-session-btn" onclick="startDeepWorkSession(1)">Mulai</button>
                            </div>
                        </div>
                        
                        <div class="session-card" data-session="2">
                            <div class="session-info">
                                <div class="session-number">2</div>
                                <div class="session-details">
                                    <h4>Deep Work Session 2</h4>
                                    <p>10:30 - 12:00 | Meeting</p>
                                </div>
                            </div>
                            <div class="session-action">
                                <span class="session-status status-pending" id="session-status-2">Menunggu</span>
                                <button class="start-session-btn" onclick="startDeepWorkSession(2)">Mulai</button>
                            </div>
                        </div>
                        
                        <div class="session-card" data-session="3">
                            <div class="session-info">
                                <div class="session-number">3</div>
                                <div class="session-details">
                                    <h4>Deep Work Session 3</h4>
                                    <p>13:30 - 15:00 | Admin</p>
                                </div>
                            </div>
                            <div class="session-action">
                                <span class="session-status status-pending" id="session-status-3">Menunggu</span>
                                <button class="start-session-btn" onclick="startDeepWorkSession(3)">Mulai</button>
                            </div>
                        </div>

                        <div class="session-card" data-session="4">
                            <div class="session-info">
                                <div class="session-number">4</div>
                                <div class="session-details">
                                    <h4>Deep Work Session 4</h4>
                                    <p>15:30 - 17:00 | Review</p>
                                </div>
                            </div>
                            <div class="session-action">
                                <span class="session-status status-pending" id="session-status-4">Menunggu</span>
                                <button class="start-session-btn" onclick="startDeepWorkSession(4)">Mulai</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Card -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon icon-settings">âš™ï¸</div>
                        <h2 class="card-title">Pengaturan Timer</h2>
                    </div>
                    
                    <div class="pomodoro-settings">
                        <div class="settings-grid">
                            <div class="setting-item">
                                <label>ğŸ¯ Deep Work</label>
                                <input type="number" id="setting-work" value="25" min="1" max="90" onchange="updateTimerSettings()">
                                <span>menit</span>
                            </div>
                            <div class="setting-item">
                                <label>â˜• Istirahat</label>
                                <input type="number" id="setting-short-break" value="5" min="1" max="30" onchange="updateTimerSettings()">
                                <span>menit</span>
                            </div>
                            <div class="setting-item">
                                <label>ğŸŒ´ Istirahat Panjang</label>
                                <input type="number" id="setting-long-break" value="15" min="1" max="60" onchange="updateTimerSettings()">
                                <span>menit</span>
                            </div>
                        </div>

                        <div class="sound-settings">
                            <div class="sound-setting-row">
                                <label>
                                    <input type="checkbox" id="sound-enabled" checked onchange="updateSoundSettings()">
                                    ğŸ”” Notifikasi Suara
                                </label>
                                <input type="range" class="volume-slider" id="sound-volume" min="0" max="100" value="50" onchange="updateSoundSettings()">
                                <button class="test-sound-btn" onclick="testSound()">Test</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== PAIRWISE COMPARISON TAB ==================== -->
        <div id="pairwise-tab" class="tab-content">
            <div class="pairwise-container">
                <!-- Guide Card -->
                <div class="card pairwise-guide">
                    <div class="card-header">
                        <div class="card-icon icon-guide">ğŸ“–</div>
                        <h2 class="card-title">Panduan Pairwise</h2>
                    </div>
                    
                    <div class="guide-content">
                        <div class="guide-section">
                            <h4>ğŸ¯ Apa itu Pairwise Comparison?</h4>
                            <p>Metode ilmiah untuk menentukan prioritas dengan membandingkan setiap opsi secara berpasangan. Lebih akurat daripada ranking langsung!</p>
                        </div>
                        
                        <div class="guide-section">
                            <h4>ğŸ“ Cara Penggunaan:</h4>
                            <ol class="guide-steps">
                                <li>Masukkan opsi/tugas yang ingin diprioritaskan</li>
                                <li>Minimal 3 opsi, maksimal 10 opsi</li>
                                <li>Klik "Mulai Perbandingan"</li>
                                <li>Pilih yang LEBIH PENTING di setiap pasangan</li>
                                <li>Lihat hasil ranking otomatis</li>
                            </ol>
                        </div>
                        
                        <div class="guide-section">
                            <h4>ğŸ’¡ Tips Memilih:</h4>
                            <div class="tips-grid">
                                <div class="tip-item">
                                    <span class="tip-icon">â°</span>
                                    <div>
                                        <strong>Urgensi</strong>
                                        <p>Mana deadline lebih dekat?</p>
                                    </div>
                                </div>
                                <div class="tip-item">
                                    <span class="tip-icon">ğŸ“ˆ</span>
                                    <div>
                                        <strong>Dampak</strong>
                                        <p>Mana hasil lebih besar?</p>
                                    </div>
                                </div>
                                <div class="tip-item">
                                    <span class="tip-icon">ğŸ¯</span>
                                    <div>
                                        <strong>Tujuan</strong>
                                        <p>Mana lebih selaras goal?</p>
                                    </div>
                                </div>
                                <div class="tip-item">
                                    <span class="tip-icon">âš¡</span>
                                    <div>
                                        <strong>Energi</strong>
                                        <p>Mana butuh fokus lebih?</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="islamic-reminder">
                            <h4>ğŸ¤² Pengingat Islami</h4>
                            <p class="arabic-text">ÙŠÙØ§ Ø£ÙÙŠÙÙ‘Ù‡ÙØ§ Ø§Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù Ø¢Ù…ÙÙ†ÙÙˆØ§ Ø§ØªÙÙ‘Ù‚ÙÙˆØ§ Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙˆÙÙ„Ù’ØªÙÙ†Ø¸ÙØ±Ù’ Ù†ÙÙÙ’Ø³ÙŒ Ù…ÙÙ‘Ø§ Ù‚ÙØ¯ÙÙ‘Ù…ÙØªÙ’ Ù„ÙØºÙØ¯Ù</p>
                            <em>"Hai orang-orang yang beriman, bertakwalah kepada Allah dan hendaklah setiap diri memperhatikan apa yang telah diperbuatnya untuk hari esok"</em>
                            <p>â€” QS. Al-Hasyr: 18</p>
                        </div>
                    </div>
                </div>

                <!-- Input Card -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon icon-input">âœï¸</div>
                        <h2 class="card-title">Masukkan Opsi</h2>
                    </div>
                    
                    <div class="options-input-area">
                        <div class="input-row">
                            <input type="text" class="option-input" id="option-input" placeholder="Ketik tugas/opsi..." maxlength="100" onkeypress="handleOptionKeypress(event)">
                            <button class="btn-add-option" onclick="addOption()">+ Tambah</button>
                        </div>
                        
                        <div class="options-list" id="options-list">
                            <div class="empty-state">
                                <span>ğŸ“</span>
                                <p>Belum ada opsi. Tambahkan minimal 3 opsi.</p>
                            </div>
                        </div>
                        
                        <div class="options-actions">
                            <span class="options-count" id="options-count">0 opsi</span>
                            <div class="action-buttons">
                                <button class="btn-secondary" onclick="clearAllOptions()">ğŸ—‘ï¸ Hapus Semua</button>
                                <button class="btn-primary" onclick="startComparison()" id="btn-start-comparison" disabled>âš–ï¸ Mulai Perbandingan</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Comparison Card -->
                <div class="card comparison-card" id="comparison-card" style="display: none;">
                    <div class="card-header">
                        <div class="card-icon icon-compare">âš–ï¸</div>
                        <h2 class="card-title">Pilih yang Lebih Penting</h2>
                    </div>
                    
                    <div class="comparison-progress">
                        <div class="comparison-progress-bar">
                            <div class="comparison-progress-fill" id="comparison-progress-fill"></div>
                        </div>
                        <span class="comparison-progress-text" id="comparison-progress-text">0 / 0</span>
                    </div>
                    
                    <div class="comparison-options">
                        <button class="comparison-option" id="comparison-option-a" onclick="selectOption('a')">
                            <span class="option-label">A</span>
                            <span class="option-text" id="option-text-a">Option A</span>
                        </button>
                        
                        <div class="comparison-vs">VS</div>
                        
                        <button class="comparison-option" id="comparison-option-b" onclick="selectOption('b')">
                            <span class="option-label">B</span>
                            <span class="option-text" id="option-text-b">Option B</span>
                        </button>
                    </div>
                </div>

                <!-- Results Card -->
                <div class="card results-card" id="results-card" style="display: none;">
                    <div class="card-header">
                        <div class="card-icon icon-results">ğŸ†</div>
                        <h2 class="card-title">Hasil Prioritas</h2>
                    </div>
                    
                    <div class="results-list" id="results-list"></div>
                    
                    <div class="results-actions">
                        <button class="btn-secondary" onclick="resetComparison()">ğŸ”„ Ulang</button>
                        <button class="btn-primary" onclick="syncPairwiseToSheet()">ğŸ’¾ Simpan ke GSheet</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== KANBAN TAB ==================== -->
        <div id="kanban-tab" class="tab-content">
            <!-- Quick Add Task -->
            <div class="kanban-header">
                <div class="kanban-add">
                    <input type="text" class="kanban-input" id="quick-task-input" placeholder="Tambah tugas baru..." maxlength="200" onkeypress="handleQuickTaskKeypress(event)">
                    <select class="priority-select" id="quick-task-priority">
                        <option value="medium">ğŸŸ¡ Sedang</option>
                        <option value="high">ğŸ”´ Tinggi</option>
                        <option value="low">ğŸŸ¢ Rendah</option>
                    </select>
                    <button class="btn-add-task" onclick="quickAddTask()">+ Tambah</button>
                </div>
                
                <div class="stats-bar">
                    <div class="stat-item">
                        <div class="stat-number" id="stat-total">0</div>
                        <div class="stat-label">Total</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="stat-progress">0</div>
                        <div class="stat-label">Progress</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="stat-done">0</div>
                        <div class="stat-label">Selesai</div>
                    </div>
                </div>
            </div>

            <!-- Kanban Board -->
            <div class="kanban-board">
                <div class="kanban-column" data-column="backlog">
                    <div class="column-header">
                        <h3>ğŸ“¥ Backlog</h3>
                        <span class="column-count" id="count-backlog">0</span>
                    </div>
                    <div class="column-tasks" id="column-backlog" ondragover="handleDragOver(event)" ondrop="handleDrop(event, 'backlog')"></div>
                </div>
                
                <div class="kanban-column" data-column="todo">
                    <div class="column-header">
                        <h3>ğŸ“‹ To Do</h3>
                        <span class="column-count" id="count-todo">0</span>
                    </div>
                    <div class="column-tasks" id="column-todo" ondragover="handleDragOver(event)" ondrop="handleDrop(event, 'todo')"></div>
                </div>
                
                <div class="kanban-column" data-column="inprogress">
                    <div class="column-header">
                        <h3>ğŸ”„ In Progress</h3>
                        <span class="column-count" id="count-inprogress">0</span>
                    </div>
                    <div class="column-tasks" id="column-inprogress" ondragover="handleDragOver(event)" ondrop="handleDrop(event, 'inprogress')"></div>
                </div>
                
                <div class="kanban-column" data-column="done">
                    <div class="column-header">
                        <h3>âœ… Done</h3>
                        <span class="column-count" id="count-done">0</span>
                    </div>
                    <div class="column-tasks" id="column-done" ondragover="handleDragOver(event)" ondrop="handleDrop(event, 'done')"></div>
                </div>
            </div>
        </div>

        <!-- ==================== SETTINGS TAB ==================== -->
        <div id="settings-tab" class="tab-content">
            <div class="settings-container">
                <!-- Google Sheets Setup -->
                <div class="card card-full">
                    <div class="card-header">
                        <div class="card-icon icon-gsheet">ğŸ“Š</div>
                        <h2 class="card-title">Google Sheets Integration</h2>
                    </div>
                    
                    <div class="setup-guide">
                        <h4>ğŸš€ Cara Setup:</h4>
                        <div class="setup-steps">
                            <div class="setup-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <strong>Buat Google Sheet Baru</strong>
                                    <p>Buka <a href="https://sheets.google.com" target="_blank">sheets.google.com</a> dan buat spreadsheet baru</p>
                                </div>
                            </div>
                            <div class="setup-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <strong>Buka Apps Script</strong>
                                    <p>Klik Extensions â†’ Apps Script</p>
                                </div>
                            </div>
                            <div class="setup-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <strong>Copy Kode</strong>
                                    <p>Klik tombol "Lihat Kode Apps Script" di bawah, copy semua kode</p>
                                </div>
                            </div>
                            <div class="setup-step">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <strong>Deploy</strong>
                                    <p>Klik Deploy â†’ New deployment â†’ Web app â†’ Anyone can access</p>
                                </div>
                            </div>
                            <div class="setup-step">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <strong>Copy URL</strong>
                                    <p>Salin Web App URL dan paste di form di bawah</p>
                                </div>
                            </div>
                        </div>
                        
                        <button class="btn-secondary" onclick="toggleAppsScript()" style="margin-top: 15px;">
                            ğŸ“œ Lihat Kode Apps Script
                        </button>
                        
                        <div class="apps-script-code" id="apps-script-code" style="display: none;">
                            <h4>Google Apps Script Code:</h4>
                            <p class="script-note">Copy semua kode ini ke Apps Script editor:</p>
                            <button class="btn-primary" onclick="copyAppsScript()" style="margin-bottom: 10px;">ğŸ“‹ Copy Kode</button>
                            <pre class="script-code">
// Sync Planner - Google Apps Script
// Version 2.0

function doGet(e) {
  const type = e.parameter.type || 'tasks';
  const ss = SpreadsheetApp.getActiveSpreadsheet();
  
  try {
    if (type === 'tasks') {
      return getTasksData(ss);
    } else if (type === 'daily') {
      const date = e.parameter.date;
      return getDailyData(ss, date);
    }
  } catch (error) {
    return ContentService.createTextOutput(JSON.stringify({
      success: false,
      error: error.toString()
    })).setMimeType(ContentService.MimeType.JSON);
  }
}

function doPost(e) {
  const ss = SpreadsheetApp.getActiveSpreadsheet();
  
  try {
    const data = JSON.parse(e.postData.contents);
    
    if (data.type === 'tasks') {
      return saveTasksData(ss, data.tasks);
    } else if (data.type === 'daily') {
      return saveDailyData(ss, data);
    } else if (data.type === 'pairwise') {
      return savePairwiseData(ss, data);
    }
  } catch (error) {
    return ContentService.createTextOutput(JSON.stringify({
      success: false,
      error: error.toString()
    })).setMimeType(ContentService.MimeType.JSON);
  }
}

function getTasksData(ss) {
  let sheet = ss.getSheetByName('Tasks');
  if (!sheet) {
    sheet = ss.insertSheet('Tasks');
    sheet.appendRow(['ID', 'Title', 'Column', 'Priority', 'Notes', 'Link', 'Created', 'Updated']);
  }
  
  const data = sheet.getDataRange().getValues();
  const tasks = [];
  
  for (let i = 1; i < data.length; i++) {
    if (data[i][0]) {
      tasks.push({
        id: data[i][0],
        title: data[i][1],
        column: data[i][2],
        priority: data[i][3],
        notes: data[i][4],
        link: data[i][5],
        created: data[i][6],
        updated: data[i][7]
      });
    }
  }
  
  return ContentService.createTextOutput(JSON.stringify({
    success: true,
    data: tasks
  })).setMimeType(ContentService.MimeType.JSON);
}

function saveTasksData(ss, tasks) {
  let sheet = ss.getSheetByName('Tasks');
  if (!sheet) {
    sheet = ss.insertSheet('Tasks');
  }
  
  sheet.clear();
  sheet.appendRow(['ID', 'Title', 'Column', 'Priority', 'Notes', 'Link', 'Created', 'Updated']);
  
  tasks.forEach(task => {
    sheet.appendRow([
      task.id,
      task.title,
      task.column,
      task.priority,
      task.notes || '',
      task.link || '',
      task.created || new Date().toISOString(),
      new Date().toISOString()
    ]);
  });
  
  return ContentService.createTextOutput(JSON.stringify({
    success: true,
    message: 'Tasks saved: ' + tasks.length
  })).setMimeType(ContentService.MimeType.JSON);
}

function getDailyData(ss, date) {
  let sheet = ss.getSheetByName('Daily');
  if (!sheet) {
    return ContentService.createTextOutput(JSON.stringify({
      success: false,
      message: 'No daily data'
    })).setMimeType(ContentService.MimeType.JSON);
  }
  
  const data = sheet.getDataRange().getValues();
  for (let i = 1; i < data.length; i++) {
    if (data[i][0] === date) {
      return ContentService.createTextOutput(JSON.stringify({
        success: true,
        data: {
          checklist: JSON.parse(data[i][1] || '[]'),
          reflections: JSON.parse(data[i][2] || '{}')
        }
      })).setMimeType(ContentService.MimeType.JSON);
    }
  }
  
  return ContentService.createTextOutput(JSON.stringify({
    success: false,
    message: 'No data for date'
  })).setMimeType(ContentService.MimeType.JSON);
}

function saveDailyData(ss, data) {
  let sheet = ss.getSheetByName('Daily');
  if (!sheet) {
    sheet = ss.insertSheet('Daily');
    sheet.appendRow(['Date', 'Checklist', 'Reflections', 'Updated']);
  }
  
  const date = data.date;
  const range = sheet.getDataRange();
  const values = range.getValues();
  
  let found = false;
  for (let i = 1; i < values.length; i++) {
    if (values[i][0] === date) {
      sheet.getRange(i + 1, 2, 1, 3).setValues([[
        JSON.stringify(data.checklist),
        JSON.stringify(data.reflections),
        new Date().toISOString()
      ]]);
      found = true;
      break;
    }
  }
  
  if (!found) {
    sheet.appendRow([
      date,
      JSON.stringify(data.checklist),
      JSON.stringify(data.reflections),
      new Date().toISOString()
    ]);
  }
  
  return ContentService.createTextOutput(JSON.stringify({
    success: true,
    message: 'Daily data saved'
  })).setMimeType(ContentService.MimeType.JSON);
}

function savePairwiseData(ss, data) {
  let sheet = ss.getSheetByName('Pairwise');
  if (!sheet) {
    sheet = ss.insertSheet('Pairwise');
    sheet.appendRow(['Date', 'Comparisons', 'Results', 'Timestamp']);
  }
  
  sheet.appendRow([
    new Date().toLocaleDateString('id-ID'),
    data.totalComparisons,
    JSON.stringify(data.results),
    new Date().toISOString()
  ]);
  
  return ContentService.createTextOutput(JSON.stringify({
    success: true,
    message: 'Pairwise results saved'
  })).setMimeType(ContentService.MimeType.JSON);
}
                            </pre>
                        </div>
                    </div>
                </div>

                <!-- Connection Settings -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon icon-connection">ğŸ”—</div>
                        <h2 class="card-title">Koneksi</h2>
                    </div>
                    
                    <div class="connection-status" id="connection-status">
                        <span class="status-icon">âšª</span>
                        <span class="status-text">Belum terhubung</span>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Web App URL</label>
                        <input type="url" class="form-input" id="gsheet-url" placeholder="https://script.google.com/macros/s/...">
                        <p class="form-hint">Paste URL dari deployment Apps Script</p>
                    </div>
                    
                    <div class="form-actions">
                        <button class="btn-secondary" onclick="testConnection()">ğŸ§ª Test Koneksi</button>
                        <button class="btn-primary" onclick="saveGSheetSettings()">ğŸ’¾ Simpan</button>
                    </div>
                </div>

                <!-- Sync Actions -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon icon-sync">ğŸ”„</div>
                        <h2 class="card-title">Sinkronisasi Data</h2>
                    </div>
                    
                    <div class="sync-actions">
                        <div class="sync-item">
                            <div class="sync-info">
                                <h4>ğŸ“‹ Kanban Tasks</h4>
                                <p>Sync semua tugas ke/dari Google Sheets</p>
                            </div>
                            <div class="sync-buttons">
                                <button class="btn-sync" onclick="syncTasksToSheet()">â¬†ï¸ Upload</button>
                                <button class="btn-sync" onclick="loadTasksFromSheet()">â¬‡ï¸ Download</button>
                            </div>
                        </div>
                        
                        <div class="sync-item">
                            <div class="sync-info">
                                <h4>ğŸ“… Data Harian</h4>
                                <p>Checklist & refleksi hari ini</p>
                            </div>
                            <div class="sync-buttons">
                                <button class="btn-sync" onclick="syncDailyToSheet()">â¬†ï¸ Upload</button>
                                <button class="btn-sync" onclick="loadDailyFromSheet()">â¬‡ï¸ Download</button>
                            </div>
                        </div>
                        
                        <div class="sync-item">
                            <div class="sync-info">
                                <h4>âš–ï¸ Hasil Pairwise</h4>
                                <p>Simpan hasil prioritas</p>
                            </div>
                            <div class="sync-buttons">
                                <button class="btn-sync" onclick="syncPairwiseToSheet()">â¬†ï¸ Upload</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Activity Log -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon icon-log">ğŸ“œ</div>
                        <h2 class="card-title">Log Aktivitas</h2>
                    </div>
                    
                    <div class="log-container" id="log-entries">
                        <div class="log-empty">Belum ada aktivitas sync</div>
                    </div>
                </div>

                <!-- Data Management -->
                <div class="card">
                    <div class="card-header">
                        <div class="card-icon icon-data">ğŸ’¾</div>
                        <h2 class="card-title">Manajemen Data</h2>
                    </div>
                    
                    <div class="data-actions">
                        <button class="btn-secondary" onclick="exportAllData()">ğŸ“¤ Export Data (JSON)</button>
                        <button class="btn-secondary" onclick="document.getElementById('import-file').click()">ğŸ“¥ Import Data</button>
                        <input type="file" id="import-file" accept=".json" style="display: none;" onchange="importAllData(event)">
                        <button class="btn-danger" onclick="clearAllData()">ğŸ—‘ï¸ Hapus Semua Data</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Task Edit Modal -->
    <div class="modal-overlay" id="task-modal">
        <div class="modal">
            <h2>âœï¸ Edit Tugas</h2>
            <input type="hidden" id="edit-task-id">
            <input type="text" class="modal-input" id="edit-task-title" placeholder="Judul tugas">
            <select class="modal-select" id="edit-task-priority">
                <option value="high">ğŸ”´ Prioritas Tinggi</option>
                <option value="medium">ğŸŸ¡ Prioritas Sedang</option>
                <option value="low">ğŸŸ¢ Prioritas Rendah</option>
            </select>
            <select class="modal-select" id="edit-task-column">
                <option value="backlog">ğŸ“¥ Backlog</option>
                <option value="todo">ğŸ“‹ To Do</option>
                <option value="inprogress">ğŸ”„ In Progress</option>
                <option value="done">âœ… Done</option>
            </select>
            <textarea class="modal-input modal-textarea" id="edit-task-notes" placeholder="Catatan..."></textarea>
            <input type="url" class="modal-input" id="edit-task-link" placeholder="Link (opsional)">
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-delete" onclick="deleteTask()">ğŸ—‘ï¸ Hapus</button>
                <button class="modal-btn modal-btn-cancel" onclick="closeTaskModal()">Batal</button>
                <button class="modal-btn modal-btn-save" onclick="saveTaskEdit()">Simpan</button>
            </div>
        </div>
    </div>

    <!-- Audio for notifications -->
    <audio id="notification-sound" preload="auto">
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2teleQwHYre51JdyCgNoo8OzkHQJBVmPuLKQfBUIVIS0sJeEFgxOgLCzlYYOAl58qrGxnpQhE1qBprOxnJMdGVp8n6+2ppwlFlqFpqawmJIXFlV5m6W0sZstJk19oaqwpJMRE0x3laGltaA2MU13mamolokMCUp9lZmcoKRKO010lqWdjoYLBEl9kpOWmJlWRlN0laGalY4ODU5+kIySkYxXR1Vzj5eYk5IWFk1+j4qHg3paSlRwjJGRj5IaG01+jYiBdnFhSlVtioqJho0cHEt+i4N1a2VjT1driYWAe4MZHUR8iIF2bWhlWFtnhH94b24TFT17h392cXBrXFxmdXtwaGcTEDl4hXp2dHNtYmJocnJqYWIODTd0gXd0c3VubGtsbm5mXl4MCTR0fXNwcHFwcXFubGRdWQkINXF6cGxqam1vcW9rYl1YCgczcXZsaGZlanBwbmhgW1gJBzJucWllYF5ka2xpZFxYVggHMGxsZ2JdW2BnaGViXVhVCAcvamllXlhYXWRkYV1ZVVMICC5oZmFaVVRaYV9dWlZSUAgILWZiXldTUlhcW1lWUk9NCAgqY15aVFBPVFhXVVJOTEoICClhW1ZRT01RVFNRTktJRwgJKF9YVFBMS09SUEZNR0RHBwknXFVRTkpITU9NSkVDQEQHCSdbUk5LR0VMTUpHQz4+QQcKJVlPTEhFQ0lKR0RBPT06BwsRWE1JRUJASEZDPzw4NwYAB1BJRUI+PENCPzs3MzQHCCFMRT49OjlAPDs2MS0sBgkgSUI7OTY0Ojg1MSwpKAYKH0U+ODYyMTY0Mi0pJiQGDRtAOTQxLi0yMC0pJSIfBw0YOzYwLSsqLiwnJCEeHAcOFDYxLCkoJysnIyAfHRsIEBIxLCgnJSQoJSEeHBkYCBAPLCglIyIhJSEfGxkXFgkRDSklISAdHCEeGxgVExMJEwwlIR4bGRkdGhcUEhAPChYPHx0aFxYWGRYTEA4NDAsLFBcZFhQTFBYTEA4LCggJCxQVEw8ODRANGQ4LCQcGBgsMEA4MCgkNDAwLCQcFBAMGBgkLCgoKCgsLCgkIBgUEBAQFBwkJCQkJCQkJCAcGBQQEBAUGBwgICAcIBwcHBwYGBQUFBQUFBgYGBgYGBgYGBgYGBgYGBQUFBQUFBQUFBQU=" type="audio/wav">
    </audio>

    <!-- Scripts -->
    <script src="app.js"></script>
</body>
</html>
